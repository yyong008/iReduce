# 事件循环

事件循环是 JavaScript 运行时环境中负责处理异步操作的机制。它是 JavaScript 实现异步编程的基础，确保异步任务能够按照一定规则有序执行。
JavaScript 是单线程的语言，但它能够处理异步操作，比如网络请求、定时器和事件处理。事件循环允许 JavaScript 在执行同步任务后，去处理异步任务。
在浏览器环境中，事件循环通常由事件触发、异步代码的执行和任务队列等组成。在 Node.js 环境中也有类似的事件循环机制。

事件循环的基本流程如下：

1. **执行同步任务**：JavaScript 代码从上到下依次执行同步任务。
2. **执行微任务**：在每个宏任务执行结束后，会检查是否有微任务需要执行（例如 Promise 的 `then` 方法、`MutationObserver` 等），并依次执行这些微任务。
3. **执行宏任务**：从宏任务队列中选择一个任务执行（例如定时器回调、事件处理器、I/O 操作等），执行完毕后，继续检查微任务队列。
4. **重复**：以上步骤循环执行，形成事件循环。

## 任务分类

| 任务类型   | 描述                                 | 示例                                              |
| ---------- | ------------------------------------ | ------------------------------------------------- |
| 同步任务   | 在主线程上顺序执行的任务             | 函数调用、变量赋值、循环等                        |
| 微任务     | 在当前宏任务执行结束后立即执行的任务 | Promise.then` 方法 queueMicro MutationObserver、process.nextTick等 |
| 宏任务     | 在当前事件循环结束后执行的任务       | `setTimeout`、`setInterval`、`I/O` 以及 `setImmediate(浏览器中包含)`等           |
| I/O 操作等 | 由事件触发，在特定事件发生时执行     | 用户点击事件、网络请求完成等                      |
